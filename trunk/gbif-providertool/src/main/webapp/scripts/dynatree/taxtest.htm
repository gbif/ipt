<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
	<title>Taxonomic jQuery Dynatree</title>
	
	<link href='skin/ui.dynatree.css' rel='stylesheet' type='text/css'>

	<script src="../jquery/jquery-1.3.min.js" type="text/javascript"></script>
	<script src='../jquery/ui.core.min.js' type='text/javascript'></script>
	<script src="../jquery.cookie.js" type="text/javascript"></script>
	<script src='jquery.dynatree.js' type='text/javascript'></script>
	
	<script type="text/javascript">
	$(document).ready(function(){
		// --- Initialize sample trees
		$("#tree").dynatree({
			title: "Taxonomy",
			rootVisible: false,
			persist: true,
			cookieId: "ipt-taxtree",
			idPrefix: "taxnode",
			fx: { height: "toggle", duration: 100 },
			initAjax: {	url: "http://localhost:8080/ajax/taxonTree.do?resource_id=10",
						data: {}
			},
			onActivate: function(dtnode) {
			    alert("You activated " + dtnode.data.title);
			},
			onLazyRead: function(dtnode){
				$.getJSON("http://localhost:8080/ajax/taxonSubTree.do?resource_id=10",{id:dtnode.data.key},
				        function(data){
							dtnode.setLazyNodeStatus(DTNodeStatus_Ok);
							dtnode.append(data);
				       	}
				);
			}			
		});
	});
	</script>
	
	</head>
	<body>
	
	<div id="main">
	<h4>Lazy-loading tree</h4>
	
	<ul id="tree">
	</ul>
			
	</div>
 
</body></html>
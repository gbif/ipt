<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 3.0//EN"
    "http://tuckey.org/res/dtds/urlrewrite3.0.dtd">

<urlrewrite use-query-string="false">
    <!-- AppFuse -->
    <rule>
        <from>^/admin/user/(.*).html$</from>
        <to type="forward">/admin/editUser.html\?id=$1&amp;from=list</to>
    </rule>
    <!-- Override default validation.js from WebWork -->
    <rule>
        <from>^/struts/css_xhtml/validation.js$</from>
        <to type="forward">/template/css_xhtml/validation.js</to>
    </rule>



    <!--
        RESOURCE URLs valid for all resources
        UUIDs should contain 36 characters. Test for at least 36 here.
    -->
    <!-- http://localhost/resource/91/ -->
    <rule>
        <from>^/resource/(\d+)/?$</from>
        <to type="forward">/resource.html?resourceId=$1</to>
    </rule>
    <!-- http://localhost/resource/91c20216-1d89-4201-87cc-143e1655f44f -->
    <rule>
        <from>^/resource/([0-9abcdef-]{32,})/?$</from>
        <to type="forward">/resource.html?guid=$1</to>
    </rule>
    <!-- http://localhost/resource/91c20216-1d89-4201-87cc-143e1655f44f/v7/eml -->
    <rule>
        <from>^/resource/([0-9abcdef-]{32,})/v(\d+)/eml$</from>
        <to type="forward">/eml.xml?guid=$1&amp;version=$2</to>
    </rule>
    <!-- http://localhost/resource/91c20216-1d89-4201-87cc-143e1655f44f/eml -->
    <rule>
        <from>^/resource/([0-9abcdef-]{32,})/eml$</from>
        <to type="forward">/eml.xml?guid=$1</to>
    </rule>
    <!-- http://localhost/resource/91c20216-1d89-4201-87cc-143e1655f44f/archive-dwc.zip -->
    <rule>
        <from>^/resource/([0-9abcdef-]{32,})/archive-([a-z]{3}).zip$</from>
        <to type="forward">/archive.do?guid=$1&amp;format=$2</to>
    </rule>
    <!-- Resource logo http://localhost/resource/91/logo.jpg-->
    <rule>
        <from>^/resource/(\d+)/logo.jpg$</from>
        <to type="forward">/logo.do?resourceId=$1</to>
    </rule>
    
    <!-- 
        DETAILS
        GUID speaks for itself, no resourceId required to find the thing
    -->
    <!-- 
        http://localhost:8080/occ/91c20216-1d89-4201-87cc-143e1655f44f 
        http://localhost:8080/occDetail.html?guid=91c20216-1d89-4201-87cc-143e1655f44f 
    -->
    <rule>
        <from>^/(tax|occ)/([0-9abcdef-]{30,})/?$</from>
        <to type="forward">/$1Detail.html?guid=$2</to>
    </rule>
    <!-- 
        http://localhost:8080/occ/91c20216-1d89-4201-87cc-143e1655f44f/json 
        http://localhost:8080/occDetail.html?guid=91c20216-1d89-4201-87cc-143e1655f44f&format=json 
    -->
    <rule>
        <from>^/(tax|occ)/([0-9abcdef-]{30,})/([a-z]+)/?$</from>
        <to type="forward">/$1Detail.html?guid=$2&amp;format=$3</to>
    </rule>
    <!-- 
        http://localhost:8080/tax/912/xml 
        http://localhost:8080/taxDetail.html?id=912&format=xml 
    -->
    <rule>
        <from>^/(tax|occ)/(\d+)/([a-z]+)?$</from>
        <to type="forward">/$1Detail.html?id=$2&amp;format=$3</to>
    </rule>
    
    
    <!-- 
        TAPIR
    -->
    <rule>
        <from>^/tapir/(\d+)/?$</from>
        <to type="forward">/tapir/service.xml?resourceId=$1</to>
    </rule>
</urlrewrite>


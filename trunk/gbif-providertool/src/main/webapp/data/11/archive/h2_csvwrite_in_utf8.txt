# The following export CSV files from the contents of the H2 ipt.data.db for tables that need to have data retained for the system to function.

CALL CSVWRITE('/Users/tuco/Projects/ipt-data/11/archive/app_user.csv','SELECT * FROM APP_USER','UTF-8');
CALL CSVWRITE('/Users/tuco/Projects/ipt-data/11/archive/extension.csv','SELECT * FROM EXTENSION','UTF-8');
CALL CSVWRITE('/Users/tuco/Projects/ipt-data/11/archive/extension_property.csv','SELECT * FROM EXTENSION_PROPERTY','UTF-8');
CALL CSVWRITE('/Users/tuco/Projects/ipt-data/11/archive/role.csv','SELECT * FROM ROLE','UTF-8');
CALL CSVWRITE('/Users/tuco/Projects/ipt-data/11/archive/thesaurus_concept.csv','SELECT * FROM THESAURUS_CONCEPT','UTF-8');
CALL CSVWRITE('/Users/tuco/Projects/ipt-data/11/archive/thesaurus_term.csv','SELECT * FROM THESAURUS_TERM','UTF-8');
CALL CSVWRITE('/Users/tuco/Projects/ipt-data/11/archive/thesaurus_vocabulary.csv','SELECT * FROM THESAURUS_VOCABULARY','UTF-8');
CALL CSVWRITE('/Users/tuco/Projects/ipt-data/11/archive/user_role.csv','SELECT * FROM USER_ROLE','UTF-8');

# The following two contain data specific to uploaded resources
*CALL CSVWRITE('/Users/tuco/Projects/ipt-data/11/archive/resource.csv','SELECT * FROM RESOURCE','UTF-8');
*CALL CSVWRITE('/Users/tuco/Projects/ipt-data/11/archive/upload_event.csv','SELECT * FROM UPLOAD_EVENT','UTF-8');

# The following read CSV files back into the H2 ipt.data.db tables.
INSERT INTO ROLE SELECT * FROM CSVREAD('/Users/tuco/Projects/ipt-data/11/archive/role.csv');
INSERT INTO THESAURUS_VOCABULARY SELECT * FROM CSVREAD('/Users/tuco/Projects/ipt-data/11/archive/thesaurus_vocabulary.csv');
INSERT INTO THESAURUS_CONCEPT SELECT * FROM CSVREAD('/Users/tuco/Projects/ipt-data/11/archive/thesaurus_concept.csv');
INSERT INTO THESAURUS_TERM SELECT * FROM CSVREAD('/Users/tuco/Projects/ipt-data/11/archive/thesaurus_term.csv');
INSERT INTO EXTENSION SELECT * FROM CSVREAD('/Users/tuco/Projects/ipt-data/11/archive/extension.csv');
INSERT INTO EXTENSION_PROPERTY SELECT * FROM CSVREAD('/Users/tuco/Projects/ipt-data/11/archive/extension_property.csv');
INSERT INTO APP_USER SELECT * FROM CSVREAD('/Users/tuco/Projects/ipt-data/11/archive/app_user.csv');
INSERT INTO USER_ROLE SELECT * FROM CSVREAD('/Users/tuco/Projects/ipt-data/11/archive/user_role.csv');

*INSERT INTO RESOURCE SELECT * FROM CSVREAD('/Users/tuco/Projects/ipt-data/11/archive/resource.csv');
*INSERT INTO UPLOAD_EVENT SELECT * FROM CSVREAD('/Users/tuco/Projects/ipt-data/11/archive/upload_event.csv');

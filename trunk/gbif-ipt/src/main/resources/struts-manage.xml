<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<!-- 
	Actions related to the resource management of the IPT 
	These will be accessible by users with managerial privileges or the administrator
	A manager will only be able to manage resources to which they are entitled access
	(currently this means that they created the resource)
 -->
<struts>
	
	
	<!-- The entry to the administration section -->
	<package name="manage" extends="ipt-default" namespace="/manage">
		<default-interceptor-ref name="managerStack"/>
		<default-action-ref name="home"/>
		
		<global-results>
			<result name="404">
				<param name="location">/WEB-INF/pages/manage/404.ftl</param>
			</result>
			<result name="401">
				<param name="location">/WEB-INF/pages/manage/401.ftl</param>
			</result>
		</global-results>

		<action name="home" class="org.gbif.ipt.action.manage.HomeAction">
			<result>/WEB-INF/pages/manage/home.ftl</result>
		</action>
		
		<action name="create" class="org.gbif.ipt.action.manage.CreateResourceAction">
			<interceptor-ref name="fileUpload">
				<param name="maximumSize">104857600</param>
			</interceptor-ref>
			<interceptor-ref name="managerStack"/>
			<result name="input">/WEB-INF/pages/manage/create_input.ftl</result>
			<result type="redirect">resource.do</result>
		</action>

		<action name="resource" class="org.gbif.ipt.action.manage.OverviewAction">
			<result>/WEB-INF/pages/manage/overview.ftl</result>
		</action>
		<action name="resource-*" class="org.gbif.ipt.action.manage.OverviewAction" method="{1}">
			<result>/WEB-INF/pages/manage/overview.ftl</result>
		</action>
		
		<action name="metadata" class="org.gbif.ipt.action.manage.MetadataAction">
			<result name="input">/WEB-INF/pages/manage/metadata.ftl</result>
			<result>/WEB-INF/pages/manage/metadata.ftl</result>
		</action>

		<action name="sources" class="org.gbif.ipt.action.manage.MetadataAction">
			<result>/WEB-INF/pages/manage/metadata.ftl</result>
		</action>

		<action name="generate" class="org.gbif.ipt.action.manage.MetadataAction">
			<result>/WEB-INF/pages/manage/metadata.ftl</result>
		</action>

	</package>
</struts>
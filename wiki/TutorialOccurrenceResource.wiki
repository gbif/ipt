=Tutorial - Create a Darwin Core Occurrence Resource=
=Table of Contents=
<wiki:toc max_depth="3" />

This tutorial explains how to create an example resource, install extensions, import source data, map source data fields to the extension, create data value translations, and publish the resource.
Install occurrence extension, create occurrence resource, import CSV data source, map, translation.

==Prerequisites==
Following are the conditions assumed to be true in order to follow this tutorial in a working IPT environment.
1) A fresh, functional, non-production version of the IPT is installed, running, and connected to the Internet. Refer to the [http://code.google.com/p/gbif-providertoolkit/wiki/IPT2ManualNotes#Getting_Started_Guide Getting Started Guide] section of the IPT User Manual to see how to prepare the IPT for its first use.
2) The reader can log in to the IPT as a user having the Admin role.
==Steps==
===1) Login===
Use the default user email address and password to log in to the IPT. After logging in successfully, the IPT menu bar will appear. Quick Reference Guide: [http://code.google.com/p/gbif-providertoolkit/wiki/IPT2ManualNotes#Header Common Features/Controls that appear on all pages/Header]

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceLoggedIn.png]

===2) Navigate to Extensions===
Click on the Administration Menu to open the options available to users having the Admin role.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/IPTAdminBeforeRegistration.png]

Click on the Extensions button to enter into the Extensions management page. If no extensions have been installed yet, the Vocabularies section will appear at the top of the page as in the following screen image. If extensions have already been installed, they will appear on the page above the Vocabularies section. Quick Reference Guide: [http://code.google.com/p/gbif-providertoolkit/wiki/IPT2ManualNotes#Configure_Extensions Administration Menu/Configure Extensions]

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceExtensionsFirstTime.png]

===3) Update vocabularies===
Click on the button labeled "Update" in the Vocabularies section to get the latest information from the GBIF Registry on controlled vocabularies used with the extensions. After updating, an information message will appear at the top of the page indicating the results of the update attempt. Quick Reference Guide: [http://code.google.com/p/gbif-providertoolkit/wiki/IPT2ManualNotes#Update_vocabularies Administration Menu/Configure Extensions/Update vocabularies]

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceVocabularyUpdated.png]

===4) Install Darwin Core Occurrence extension===
Locate the row for the Darwin Core Occurrence extension. If it has not yet been installed, it will appear below the Vocabularies section and will have a button labeled "Install" in the right-hand column under the extension name (Darwin Core Occurrence). If the extension has already been installed, it will appear above the Vocabularies section. If this is the case, skip this step, otherwise, click on the "Install" button. See screen image above, under step 2. Quick Reference Guide: [http://code.google.com/p/gbif-providertoolkit/wiki/IPT2ManualNotes#Install_extension Administration Menu/Configure Extensions/Install extension]

===5) Navigate to Manage Resources menu===
Click on Manage Resources in the menu bar. If this IPT installation does not yet have any resources configured, the page will appear as in the screen image below. Otherwise it will show table of existing resources above the section labeled "Create New Resource".

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceCreateNewResource.png]

===6) Create the resource===
Enter the value "My Occurrence Resource" in the text box labeled "Shortname", then click on the button labeled "Create". In this tutorial we will not create a resource from a pre-existing Darwin Core archive. If we wanted to do so, we would choose the archive file before clicking on the "Create" button. Quick Reference Guide: [http://code.google.com/p/gbif-providertoolkit/wiki/IPT2ManualNotes#Create_an_entirely_new_resource Manage Resources Menu/Create New Resource/Create an entirely new resource]

Notice that the page shows that an invalid entry was made for the resource's Shortname. 

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceCreateNewResourceBadName.png]

Enter the value "MyOccurrenceResource" as a valid value in the Shortname text box and click on the Create button. If there are no further errors the Resource Overview page will appear. Note that the resource is currently known by its Shortname in all lower case, lacks required metadata, has no source data set, and is private.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceOverviewAfterCreate.png]

===7) Navigate to the Basic Metadata page===
Click on the button labeled "Edit" to enter the Basic Metadata page, the first of a series of metadata pages and the only one having fields for metadata that are required for the resource to be published. The Basic Metadata page opens with minimal default values already selected. The current title is the same as the Shortname given in step 6, the metadata and resource languages are selected, the resource subtype is selected, and the Metadata Provider's First Name, Last Name, and Email address are filled in from the information about the currently logged in user.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceBasicMetadata.png]

===8) Enter required metadata===
The required metadata fields include the Title, the Description, and one of the following for the Resource Contact, the Resource Creator, and the Metadata Provider: Last Name, Position, Organisation. Change the Title from the current shortname to "My Occurrence Resource". Enter a Description. Select "occurrence resource" for the Subtype. Enter at least one of the required fields and any other fields you would like for the Resource Contact. Click on the "Copy details from contact" link in the Resource Creator section to see how the fields are filled from the Resource Contact section above. Enter or change any other fields for the Resource Contact, Creator, or Metadata Provider, without violating the metadata requirements. Click on the button labeled "Save". The Geographic Coverage page, the next in the series of metadata pages, will appear. In this tutorial it is not necessary to enter any metadata on any of the remaining metadata pages - there are no further metadata requirements to publish a resource. Quick Reference Guide: [http://code.google.com/p/gbif-providertoolkit/wiki/IPT2ManualNotes#Metadata Manage Resources Menu/Resource Overview/Metadata]

===9) Navigate to the Resource Overview page===
Click on the Manage Resources menu. Now you will see the table of existing resources with a row for the newly edited resource named "My Occurrence Resource" having the Type "occurrence", 0 for the number of Records, a Last Modified corresponding to the date the metadata were last saved, and Visible to "You and 0 others". 

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceListAfterMetadata.png]

Click on the "My Occurrence Resource" link in the Name column to open the Resource Overview page again. Note that there is no longer a message in the Metadata area of the page saying that the metadata are incomplete. Also, the page title is now the Title of the resource instead of the resource shortname, and the resource description shows in right-hand, summary column of the metadata area.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceOverviewAfterMetadata.png]

===10) Add a source data file===
Download the Occurrence example data file from the IPT project web site (http://gbif-providertoolkit.googlecode.com/files/OccurrenceData.txt). Click on the button labeled "Choose File" to navigate to and select the downloaded file. After the file is selected its name will appear in the Source Data area next to the Choose File button. Click on the button labeled "Add" to navigate to the Source Data File detail page. Note that the file summary in upper right shows that the file was readable given the parameters that were detected in the file and entered in the fields on this page automatically. The file contains 27 columns and 12 Rows. To see the contents of the file as interpreted, click on the button labeled "Preview". Quick Reference Guide: [http://code.google.com/p/gbif-providertoolkit/wiki/IPT2ManualNotes#Source_Data Manage Resources Menu/Resource Overview/Source Data]

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceSourceDataAdd.png]

Click on the button labeled "Save" to preserve the source data file information and return to the Resource Overview page. 

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceOverviewAfterSourceData.png]

Note that the right-hand column of the Source Data area shows summary information for the source data file and a button labeled "Edit", which will reopen the Source Data File detail page if clicked. The Resource Overview page now also shows a select box in the left-hand area of the Darwin Core Mappings area. This select box contains a list of Extensions that have been installed in this instance of the IPT. If this tutorial has been followed exactly, there will be only one item in the select box, "Darwin Core Occurrence", which represents the extension installed in step 4.

===11) Select the extension and source data to map=== 

Select the Darwin Core Occurrence extension and click on the button labeled "Add" to open the Data Source selection page.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceSourceDataSelect.png]

The top of the page shows that the mapping will be done against the Darwin Core Occurrence extension. Below is a select box showing a list of possible data sources to map. If this tutorial has been followed exactly, there will be only one item in the select box, "occurrencedata", which represents the file added in step 10. Select the occurrencedata Data Source and click on the button labeled Save" to go to the Mappings Page.

===12) Map source data fields to extension properties===
Following is a partial screen image of the Mappings page as it appears when it is first opened. Quick Reference Guide: [http://code.google.com/p/gbif-providertoolkit/wiki/IPT2ManualNotes#Darwin_Core_Mappings Manage Resources Menu/Resource Overview/Darwin Core Mappings]


[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceMappings.png]

On the top of the mappings page is a message indicating that 22 columns from the source data file have been automatically mapped to properties in the extension based on the equivalence of column headers names and extension property names. The 22 properties that have been mapped each have the column name selected in the first select box in the right-hand column of the Mappings are of the page. Remember that there are 27 columns in the occurrencedata.txt file, meaning that five columns could not be mapped automatically. These five fields include GUID, LINK, SOURCE_ID, COLLECTOR, and EARLIEST_DATE_COLLECTED, which do not appear in the Darwin Core Occurrence extension properties. Nevertheless, most of these columns can be mapped to Darwin Core Occurrence extension properties. 

The GUID in the source data file is a global unique identifier for the occurrence record, which means, theoretically, that no other occurrence record anywhere can be confused with this one. This meaning for GUID is in accord with the definition of the Darwin Core occurrenceID (http://rs.tdwg.org/dwc/terms/index.htm#occurrenceID), so the occurrenceID can be mapped to the GUID column in the source data. To do so, click on the left-most select box next to occurrenceID in the Mapping table and select GUID from the list of column names given. 

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceGUID.png]

Note that the occurrenceID select box contains three extra choices at the top of the list (No ID, UUID Generator, and Line Number) that are not column names in the source data. 

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceMappingOccurrenceID.png]

These three extra options are provided in any extension property that is meant to be a record identifier, for example, occurrenceID for an an Occurrence extension, and taxonID for a Taxon extension. The IPT does not require a record identifier (occurrenceID in this case) if there will be no other mappings to other extensions for the same resource. The "No ID" option allows the user to state explicitly that there is no equivalent to a record identifier in the source data. The other two options generate occurrenceIDs automatically. The UUID Generator option creates global unique identifiers, while the Line Number creates IDs that are unique only with the resource and that are numbered sequentially based on the rows in the source data file.

The LINK column in the source data contains URLs to detailed information about the record. This is the equivalent of the Darwin Core occurrenceDetails property (http://rs.tdwg.org/dwc/terms/index.htm#occurrenceDetails), so the occurrenceDetails property can be mapped to the LINK column in the source data. Select LINK from the list of columns in the left-most select box next to occurrenceDetails in the Mapping table.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceLINK.png]

The SOURCE_ID column in the source data contains record identifiers that are unique within the data set and have a use in the original data store. Whereas these could be used as an occurrenceID, the global unique identifier given in the GUID column in the source data is a better match to the purpose of occurrenceID. There is no other extension property that matches the meaning of the SOURCE_ID, so we will leave it unmapped.

The COLLECTOR column in the source data corresponds exactly with the Darwin Core recordedBy property (http://rs.tdwg.org/dwc/terms/index.htm#recordedBy). Map the recordedBy property to the COLLECTOR column by selecting COLLECTOR from the list of column names in the left-most select box next to recordedBy in the Mapping Table.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceCOLLECTOR.png]

The EARLIEST_DATE_COLLECTED column in the source data is the only date information shared in this example data set, and presumably signifies the beginning date in a date range. Though there may have been another column corresponding to a latest data collected, but that is not available in the source data file. With only this much information, there is no exact match to a Darwin Core Occurrence extension property. However, if we also know that the source data contains only collecting dates that occurred on a single day, then the earliest and lasted dates collected would be the same, and the meaning of EARLIEST_DATE_COLLECTED would correspond with the meaning of Darwin Core eventDate property (http://rs.tdwg.org/dwc/terms/index.htm#eventDate). Assume this is true and map the eventDate property to the EARLIEST_DATE_COLLECTED column by selecting EARLIEST_DATE_COLLECTED from the list of column names in the left-most select box next to eventDate in the Mapping Table.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceEARLIEST_DATE_COLLECTED.png]

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceType.png]

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceDatasetName.png]

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceCountryCode.png]

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/ipt2/OccurrenceResourceTutorial/IPTTutorialOccurrenceResourceCountry.png]

===13) Create a source data translation===

Translation.

===14) Make the resource public===
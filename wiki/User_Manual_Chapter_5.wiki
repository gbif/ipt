#summary GBIF IPT User manual - Chapter 5
#labels Phase-Deploy

Get the PDF version of this manual at [http://gbif-providertoolkit.googlecode.com/files/GBIF_IPT_User_Manual_1.0.pdf]

= The GBIF Integrated Publishing Toolkit User Manual =

GBIF Secretariat, May 2009


= 5 Resources Management =

== 5.1  Data Types ==

=== 5.1.1  Taxon Primary Occurrence Data ===

Taxon Primary Occurrence Data (or simply, occurrence data) is defined in the scope of GBIF as digital text or multimedia data record detailing facts about the instance of occurrence of an organism, i.e. on the what, where, when, how and by whom of the occurrence and the recording.

In terms of connecting data to the IPT, an occurrence dataset is defined as a table or database storing information about the distribution of biological organisms in the form of points defined by a textual description and/or geographical coordinates.

=== 5.1.2  Taxonomic Checklists ===

Taxonomic checklist data refers to structured data providing information about taxonomic names and their relationships.

=== 5.1.3  Resource Metadata ===

In the context of GBIF, metadata records are those which provide information about the suppliers of biodiversity data and about the origins and purpose of those data.

As regards the IPT, a metadata record is composed of all the descriptive information that must be attached to a dataset in terms of origin (who produced the original data, who is connecting it to the IPT instance), contents (both taxonomically and geographically), intellectual property rights, etc.

== 5.2  Resource Creation ==

New resources are created by a manager (or an administrator) on the Manage page.

The manager chooses which resource type to create by clicking on the corresponding link in the Resource Actions menu: New Occurrence Resource, New Checklist Resource or New Metadata Resource.

== 5.3  Resource Metadata ==

When the resource has been created, the manager can add its metadata.

=== 5.3.1  Basic Metadata ===

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.014x.png]

The first step is to basically describe the dataset that will be published. The manager must fill in the following fields:

*Title* Title of the resource

*Type* The type of resource data. The list depends on the data type (Occurrence, Checklist or Metadata):

  * *Checklist* A resource describing a checklist.

  * *Fossil Specimen* A resource describing a fossilised specimen. 

  * *Legislative Checklist*

  * *Living Specimen* A resource describing a living specimen. 

  * *Moving Image*

  * *Nomenclature Checklist* A resource describing a nomenclatural checklist. 

  * *Organism Observation* A resource describing an observation. 

  * *Organism Observation by Human* A resource describing an observation made by one or more people without accompanying physical evidence. 

  * *Organism Observation by Machine* A resource describing an observation made by a machine without accompanying physical evidence.

  * *Preserved Specimen* A resource describing a preserved specimen. 

  * *Regional Checklist* A resource describing a taxonomic checklist. 

  * *Sound Recording*  

  * *Species Descriptions* A resource describing a general or detailed description of a species. 

  * *Species Distributions* A resource describing the geographic distribution of a species. 

  * *Specimen*

  * *Still Image*

  * *Taxonomic Checklist* A resource describing a taxonomic checklist.


*Contact Name*  

*Contact Email*

* Upload logo* The manager can upload a logo associated with the resource. The logo must be a square image, 68 pixels by 68 pixels. 

*Description* Description of the resource

Once the fields have been filled in and the form saved, the resource is created and can be accessed from the Manage section.

=== 5.3.2  Resource Originator ===

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.015x.png]

This section describes the originator of the resource, i.e. the person responsible for the information entered in the IPT. The following fields are to be filled in:

*Resource Language* (mandatory field) The language of the resource data (not the language of the metadata) 

*First Name* (mandatory field)

*Last Name* (mandatory field)

* Organisation*

*Position*

*Phone*

*Email* (mandatory field)

*Homepage*

*Address*

*Postal Code*

*City*

*Province*

*Country* (mandatory field)

=== 5.3.3  Geographic Coverage ===

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.016x.png]

In this section, the manager can describe the geographic coverage of the resource by drawing it on a map.

Using the map

The manager can navigate on the map by clicking and dragging the cursor around and can zoom using the scale on the left of the map. Double-clicking somewhere on the map will zoom and centre the map on that point.

Creating a new area

The manager must click on the grey select area button in the top right corner of the map. Clicking and dragging with the mouse will define the geographic coverage area. Only one area can be created per map.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.017x.png]

Description

The manager can describe the geographic coverage in the box below the map.

=== 5.3.4  Taxonomic Coverage ===

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.018x.png]

*Taxonomic Metadata*

  * *General Taxonomic Coverage Description*
  * *Taxonomic Keywords*

*Lowest Common Taxon*

  * *Scientific Name* (mandatory field)
  * *Common Name Rank* (mandatory field)

=== 5.3.5  Temporal Coverage ===

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.019x.png]

The manager must fill in the temporal coverage of the collection of information related to the resource: start and end date. The dates must be filled in using the format "YYYY/MM/DD" (e.g. 2003/04/22). If the resource covers a single day, the manager can enter a single date and check the corresponding checkbox.

=== 5.3.6  General Keywords ===

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.020x.png]

In this section, the manager can indicate a series of keywords defining/describing the resource. The different keywords must be separated by commas.

=== 5.3.7  IPRights ===

On this page, the manager can indicate the information related to intellectual property rights (IPRights) attached to the resource.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.021x.png]

*Purpose* A description of the purpose of this dataset. 

*Maintenance* A description of the maintenance of this data resource. This includes information about the frequency of update, and whether there is ongoing data collection. 

*IPRights* Typically, an intellectual Rights element will contain a rights management statement for the resource, or reference a service providing such information. Rights information encompasses Intellectual Property Rights (IPR), Copyright, and various Property Rights. In the case of a data set, rights might include requirements for use, requirements for attribution, or other requirements the owner would like to impose.

*Considering using a Creative Commons license?* The GBIF promotes the use of the Creative Commons licenses, which allow the originator to keep his/her copyright and at the same time allow to copy and distribute the information under the conditions specified by the originator. For more information, see http://creativecommons.org/license/.

The link below the IPRights box ’Considering using a Creative Commons license?’ automates the process of creating a Creative Commons licence so users can copy the output straight into the IPRights box.

=== 5.3.8  Research Project ===

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.022x.png]

If the resource is linked to a specific reseach project, the manager can describe it in this section.

*Title*

*Project Lead Organisation*

*Abstract*

*Funding*

*Study Area Description*

*Design Description* The field Design Description contains general textual descriptions of research design. It can include detailed accounts of goals, motivations, theory, hypotheses, strategy, statistical design, and actual work. Literature citations may also be used to describe the research design.

=== 5.3.9  Methods ===

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.023x.png]

*Methods*

*Sampling Description*

*Quality Control*

== 5.4  Data Resource Configuration (occurences and checklists only) ==

Once the resource has been created, the manager must define a data source and map properties.

=== 5.4.1  Source Data ===

Data sources can be of two kinds in the IPT: File Data Sources or SQL Data Sources (connections to existing database servers). The manager can define as many data sources as wanted, but it is necessary to define at least one. As the main one will be mapped to the Darwin Core terms, it is best for the source data to be adjusted accordingly (i.e. column names should be Darwin Core terms). Others will be used to complement a core Darwin Core record. For this to work, additional sources need to refer to core identifiers, i.e. have a foreign key, but do not need their own identifier.

==== File Data Sources ====

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.024x.png]

In order to define a file data source, the manager must upload a text file with a single header row and with tab separated values. Such tab delimited text files are easily created from any spreadsheet software or database management system.

Zip-compressed can be used and will be automatically unpacked on the server. Uploaded files (compressed or not) cannot be larger than 100MB.

Once the file has been uploaded, the manager can define whether the first row of the file is a header or not, by checking or unchecking the column headers box and pressing the save button. All the data fields will then be named after this header. If not set, generic names (col001, col002, col003 and so on) will be used.

When done adding data sources, the manager can press the Next button to go to the Mappings page.

==== SQL Data Sources ==== 

In order to define a SQL data source, the manager must first configure a database connection, then add some SQL select statements to create views on the data.

Pressing the Edit button on the Source Data page will bring the manager to the SQL Settings page. This is the page where the database connection will be defined. To this effect, the following information is needed: the database type, the database connection URL, the database user and the database password. The right Java DataBase Connection (JDBC) driver must also be installed. Many of them are already bundled with the IPT. It is possible to add new ones, by downloading them and adding the jar file to the ITP lib folder and restarting the application server.

The SQL Settings page also gives a list of important parameters for the most used databases.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.025x.png]

*Database Type* The type of the database holding the data must be defined. If this particular system is not in the list, the manager can use a generic ODBC or choose the other option and to define a custom driver class. 

*Database Connection URL* The manager must fill in the URL of the database connection. The format to be used is explained in the second part of the SQL Settings page. The manager will generally need to know the host or server (localhost if the database is on the same machine as the IPT), the port (default ports are given for most used databases), and the name of the database (to be asked to the database administrator). For instance, for a local MySQL database called test, the database connection URL will be jdbc:mysql://localhost:3306/test. 

*Database User* The username of a database user with SELECT rights 

*Database Password* The corresponding password

After defining the SQL settings, the manager must add some SQL SELECT statements to create views on the data. This is done by clicking on the ADD button and filling in the form.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.026x.png]

Several of these queries can be created, e.g. one for each Darwin Core extension in use.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.027x.png]

Once all data sources have been defined, pressing the Next button will bring the manager to the Mappings page. The SQL statements will be mapped the same way as uploaded text files.

=== 5.4.2  Mappings ===

Data in the IPT is organised along a star schema: a fixed table holds Darwin Core terms and is linked to a number of extension tables (in a one-to-many relationship) that can be optionally configured and defined by the IPT administrator (see Extensions section above). Each extension can hold multiple records for a single core record, e.g. there can be many images for a species or occurrence.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.028x.png]

The Property Mappings page displays a list of the existing mappings, that can be edited, gives the possibility to add new mappings and allows to actually import or re-import the data.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.029x.png]

==== Your Existing Mappings ==== 

When defining new data sources, the IPT will automatically map those fields whose name fits a Darwin Core term or the field name of an installed extension to the furthest extent possible. These mappings can be viewed or modified by pressing the Edit button.

The page is split in three parts:

*ID Properties* A list of all properties used as identifiers 

*Property Mappings* A list of all the selected extension or core properties that have been mapped to a data source field. 

*Available Properties* A list of all the selected extension or core properties that have not been mapped to a data source field.

==== ID Properties ==== 

In this section, the manager can define which fields are used as identifiers (IDs).

DarwinCore mapping

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.030x.png]

If the source is mapped to DarwinCore, the following fields are to be filled in:

*Source ID for record* (mandatory field) The sourceID is the local ID for each core record that extensions can link to. It is also used to compare an existing record when a new version is imported. It is a required field as the IPT currently doesn’t support sources without identifiers. 

*GUID for record* The GUID (Globally Unique IDentifier) is optional but will be generated automatically if not mapped. It is used as a public ID for published records. 

*Link to record details* This is a link to the HTML details page for a single record. It can link to any public webpage (i.e. not in the IPT) holding the data. If this link is not available in the database, the manager can use the Link template with {{{<ID>}}} placeholder (see below). 

*Link template with {{{<ID>}}} placeholder* The manager can enter a direct link to an external webpage. The manager can use {{{<ID>}}} as a placeholder that will be dynamically replaced for every record. Each record can then be linked to a specific webpage.

NB: The save button will save the information that was entered in the fields. The Done button brings the manager back to the main Property Mappings page without saving the information.

Extension mapping

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.031x.png]

If the source is mapped to an extension, only one field is to be filled in:

*Source ID for record* (mandatory field) The source ID is the local ID for an extension record that the core can link to.

==== Property Mappings ==== 

Each Darwin Core or extension property mapped to a data source field is displayed in the list, followed by the data source field. This field can be changed as the drop-down menu displays the full list of fields of a given data source. It is also possible to assign a fixed value (a common value for all records, i.e. the project/collection code) by entering it in the text field (and choosing a blank value in the drop-down).

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.032x.png]

If controlled vocabulary has been defined for the Darwin Core or the extension, it is not possible to manually enter a fixed value. In this case, a Terms button and a new drop down are available.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.033x.png]

Managers have to use one of the controlled terms either as static values by selecting one from the drop down, or by selecting a source column that contains such values. As the source often uses different terms than the ones defined in the controlled vocabulary, the manager will be able to transform/map each value from the source to a controlled term in the vocabulary.

==== Available Properties ==== 
 
This section displays a list of the selected extension or core properties not yet mapped to a data source field. They are grouped in subsections that can be expanded by clicking on the green arrow. To map an available property to a data source field, the manager must click on the said property that will then move to the property mappings section. The manager can then choose which data source field should be mapped to it (by selecting it in the drop-down menu).

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.034x.png]

Add New Mapping

To add a new mapping, the manager must first choose what extension will be mapped to which data source, then press the Add button.

The procedure is then the same as working with existing mappings (see above).

Cache Database

The cache page allows the manager to actually import the data into the IPT. This is done by pressing the Import button. Depending on the amount of data and the network performance, the operation can take a long time. Once done, the IPT displays a confirmation message. If errors occur during the import operation, they are attached as annotations to the resource. These annotations are available through the explore menu.

The cache can be rebuilt at any time when the manager wants to update the information with new or updated sources.

== 5.5  Resource Publication ==

Once a Resource has been configured and its metadata filled in, it can be published on the IPT, via the Publish button.

Publishing a resource also registers it with GBIF and updates its metadata in the registry. A resource therefore has three states, indicated by a coloured box in the upper right corner of the page:

*unpublished, unregistered* This is the default for new resources. It is neither registered nor should it be visible in the public portal part of the IPT.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.035x.png]

*modified, not registered* The resource is intended to be public, is present in the IPT portal and if settings allow, should be registered with GBIF. The resource metadata is modified though and differs from a) GBIFs registry metadata or b) the versioned EML document which is generated each time the manager publishes a resource (NB: the geoserver WFS/WMS services’ own metadata are then also out of date).

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.036x.png]

*published, registered* Same as above, but the metadata in the registry/ EML&geoserver should reflect your latest state.

[http://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-ipt-docs/screenshots/GBIF_IPT_User_Manual_1.037x.png]

It is also possible to delete a resource by using the Delete button on its Basic Metadata page.
#summary How to help us make IPT even better

= Developing IPT on Mac OS X =

The following describes a typical Eclipse development setup for working with IPT source code in the following environment:
 * OS X 10.5.8
 * Java 1.5.0_19 
 * Eclipse 3.5
 * Subclipse 1.6 (Eclipse Plugin)
 * Maven 2.0.9
 * M2Eclipse [http://m2eclipse.sonatype.org/update-dev development build] (Eclipse Plugin)

=== Check out the IPT source code ===
Using Subclipse, *check out as a project in the workspace* the main line of IPT development and name the project *ipt*:

{{{
https://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-providertool
}}}

=== Enable dependency management ===
Using M2Eclipse, *Enable Dependency Management* for the *ipt* project. You will see build errors, which can be fixed by adding the following two libraries to the *ipt* project build path:

{{{
ipt/target/warpath/appfuse-struts-2.0.2.warpath.jar
ipt/target/warpath/appfuse-web-common-2.0.2.warpath.jar
}}}

=== Create a run configuration for launching the IPT web app ===
Create a new Maven Build run configuration and name it *ipt-eclipse*. 

In the *Main* tab of the *ipt-eclipse* run configuration, type *eclipse* in the *Profiles* box. Select the *Update Snapshots* and *Skip Tests* checkboxes. For the *Maven Runtime* option, click the *Configure...* button, add the *External* Maven installation on your machine, click *Okay*, and then select it as the *Maven Runtime*.

In the *JRE* tab of the *ipt-eclipse* run configuration, type the following *VM arguments*:

{{{
-Xmx1048m -Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n
}}}

// PENDING

Make sure you have Eclipse, Subversion, and Maven installed. Then:
 # SVN check out IPT:
  {{{
svn checkout https://gbif-providertoolkit.googlecode.com/svn/trunk/gbif-providertool gbif-providertool --username <your username>
  }}}
 # Add the Maven repository to Eclipse: 
  {{{
mvn -Declipse.workspace=<Eclipse Workspace Path> eclipse:add-maven-repo
  }}}
 # From the `gbif-providertool` directory, setup the IPT Eclipse project files:
  {{{
mvn org.apache.maven.plugins:maven-eclipse-plugin:2.6:eclipse
  }}}
 # Import the `gbif-providertool` project into Eclipse as an existing Java project. To Run IPT on localhost:8080:
  {{{ 
mvn -Peclipse -U
  }}}

= Setting up Eclipse Environment and Code Checkstyles  =

These instructions describe how to configure Eclipse for the IPT and related coding styles (based on GWT). 

=== Required IPT variables ===
{{{
Window->Preferences->General->Workspace->Linked Resources
# Create a variable named "M2_REPOS" pointing to your local Maven repository (i.e. ~/.m2/repository).
}}}

=== Spelling ===
{{{
Window->Preferences->General->Editors->Text Editors->Spelling
# Enable spell checking and use "eclipse/settings/english.dictionary".
}}}

=== Output Filtering ===
{{{
Window->Preferences->Java->Compiler->Building
# Make sure "Filtered Resources" includes ".svn/"
}}}

=== Code style/formatting ===
{{{
Window->Preferences->Java->Code Style->Formatter->Import
# Use eclipse/settings/code-style/ipt-format.xml
}}}

=== Import organization ===
{{{
Window->Preferences->Java->Code Style->Organize Imports->Import
# Use eclipse/settings/code-style/ipt.importorder
}}}

=== Member sort order ===
{{{
Window->Preferences->Java->Appearance->Members Sort Order
# There is no import here, so make your settings match eclipse/settings/code-style/ipt-sort-order.png
}}}

First, members should be sorted by category:
 # Types 
 # Static Fields 
 # Static Initializers
 # Static Methods
 # Fields
 # Initializers
 # Constructors
 # Methods

Second, members in the same category should be sorted by visibility:
 # Public 
 # Protected
 # Default
 # Private

Third, within a category/visibility combination, members should be sorted alphabetically.
 
=== Compiler settings ===
{{{
Window->Preferences->Java->Compiler
# Set the compiler compliance level to 1.5.
}}}

=== Compiler errors & warnings ===
{{{
Window->Preferences->Java->Compiler->Errors/Warnings
}}}

The following warnings are suggested:
 * Code Style - Method with a constructor name
 * Potential programming problems:
  # Assignment has no effect
  # Accidental boolean assignment
  # 'finally' does not complete normally
  # Using a char array in string concatentation
  # Hidden catch block
  # Inexact type match for vararg arguments
 * Name shadowing and conflicts - all except "Local variable" hiding
 *Deprecated and restricted API - all
 * Unnecessary code - all except "Unnecessary 'else' statement"
 * Generic types - all except "Generic type parameter declared with final type bound"

Annotations:
 * Annotation is used as super interface
 * Enable @SuppressWarnings annotations

=== Checkstyle ===

Checkstyle is an Eclipse plugin that's used to enforce good programming style.
 # Install Checkstyle version 4.4.2 (newer versions will not work):
 # Copy "eclipse/settings/code-style/gwt-customchecks.jar" into: eclipse/plugins/com.atlassw.tools.eclipse.checkstyle_x.x.x/extension-libraries
 # Restart Eclipse

Import IPT Checks:
{{{
Window->Preferences->Checkstyle->New...
}}}
 # Set the Type to "External Configuration File"
 # Set the Name to "IPT Checks" (important)
 # Set the location to "settings/code-style/ipt-checkstyle.xml".
 # Suggested: Check "Protect Checkstyle configuration file".
 # Click "Ok".

Import IPT Checks for Tests:
Repeat step 2, except:
 # Set the Name to "IPT Checks for Tests" (important)
 # Set the location to "settings/code-style/ipt-checkstyle-tests.xml".